<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Tabbed Page</title>
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
            rel="stylesheet">
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
        <link rel="stylesheet" href="styles/styles.css">
    </head>
    <body>
        <div class="container mt-5">
            <ul class="nav nav-tabs" id="myTab" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="vbdb-tab"
                        data-bs-toggle="tab" data-bs-target="#vbdb"
                        type="button" role="tab" aria-controls="vbdb"
                        aria-selected="true">VBDB</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="live-tab" data-bs-toggle="tab"
                        data-bs-target="#live" type="button" role="tab"
                        aria-controls="live" aria-selected="false">Live</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="schedule-tab" data-bs-toggle="tab"
                        data-bs-target="#schedule" type="button" role="tab"
                        aria-controls="schedule" aria-selected="false">Schedule</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="teams-tab" data-bs-toggle="tab"
                        data-bs-target="#teams" type="button" role="tab"
                        aria-controls="teams"
                        aria-selected="false">Teams</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="rankings-tab"
                        data-bs-toggle="tab" data-bs-target="#rankings"
                        type="button" role="tab" aria-controls="rankings"
                        aria-selected="false">Rankings</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="histories-tab"
                        data-bs-toggle="tab" data-bs-target="#histories"
                        type="button" role="tab" aria-controls="histories"
                        aria-selected="false">Histories</button>
                </li>
            </ul>
            <div class="tab-content" id="myTabContent">
                <div class="tab-pane fade show active" id="vbdb" role="tabpanel"
                    aria-labelledby="vbdb-tab">
                    <h2 class="text-center">VBDB Content</h2>
                    <p class="text-center">Welcome to VBDB! This is a project to host NCAA volleyball data openly for anyone. Enjoy!</p>
                    <p class="text-center">Work in progress</p>
                </div>
                <div class="tab-pane fade" id="live" role="tabpanel"
                    aria-labelledby="live-tab">
                    <h2 class="text-center">Live Content</h2>
                    <div class="table-responsive">
                    </div>
                </div>
                <div class="tab-pane fade" id="schedule" role="tabpanel"
                    aria-labelledby="schedule-tab">
                    <h2 class="text-center">Schedule Content</h2>
                    <div class="table-responsive">
                        <table id="scheduleTable" class="table table-dark table-hover" >
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Home Team</th>
                                    <th>Away Team</th>
                                    <th>Venue</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- We'll fill this with rows of data from the CSV -->
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="tab-pane fade" id="teams" role="tabpanel"
                    aria-labelledby="teams-tab">
                    <h2 class="text-center">Teams Content</h2>
                    <div class="table-responsive">
                    <table id="teamsTable" class="table table-dark table-hover" >
                        <thead>
                            <tr>
                                <th>Team</th>
                                <th>Conference</th>
                                <th>School URL</th>
                                <th>Athletics URL</th>
                                <th>State</th>
                                <th>Year</th>
                                <th>Division</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- We'll fill this with rows of data from the CSV -->
                        </tbody>
                    </table>
                </div>
                </div>
                <div class="tab-pane fade" id="rankings" role="tabpanel"
                    aria-labelledby="rankings-tab">
                    <h2>Rankings Content</h2>
                    <p>This is the content for the Rankings tab.</p>
                </div>
                <div class="tab-pane fade" id="histories" role="tabpanel"
                    aria-labelledby="histories-tab">
                    <h2>Histories Content</h2>
                    <p>This is the content for the Histories tab.</p>
                </div>
            </div>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
        <script>
            // Fetch the CSV file from the GitHub raw URL
            fetch('https://raw.githubusercontent.com/widbuntu/vbdb-info/main/data/season_schedule.csv')
                .then(response => response.text()) // Read it as plain text
                .then(csvData => {
                    const rows = csvData.split('\n'); // Split CSV into rows
                    
                    const table = document.getElementById('scheduleTable');
                    const tbody = table.querySelector('tbody');
                    
                    // Process the rest of the rows as data
                    rows.slice(1).forEach(row => {
                        const rowData = row.match(/(".*?"|[^",\s]+)(?=\s*,|\s*$)/g); // Split each row by comma
                        const tr = document.createElement('tr');
        
                        rowData.forEach(data => {
                            const td = document.createElement('td');
                            td.textContent = data.trim(); // Create table data
                            tr.appendChild(td);
                        });
        
                        tbody.appendChild(tr); // Add row to tbody
                    });
                })
                .catch(error => console.error('Error loading CSV:', error));
        </script>
        <script>
            // Fetch the CSV file from the GitHub raw URL
            fetch('https://raw.githubusercontent.com/widbuntu/vbdb-info/main/data/teams.csv')
                .then(response => response.text()) // Read it as plain text
                .then(csvData => {
                    const rows = csvData.split('\n'); // Split CSV into rows
                    
                    const table = document.getElementById('teamsTable');
                    const tbody = table.querySelector('tbody');
                    
                    // Process the rest of the rows as data
                    rows.slice(1).forEach(row => {
                        const rowData = row.split(','); // Split each row by comma
                        const tr = document.createElement('tr');
        
                        rowData.forEach(data => {
                            const td = document.createElement('td');
                            td.textContent = data.trim(); // Create table data
                            tr.appendChild(td);
                        });
        
                        tbody.appendChild(tr); // Add row to tbody
                    });
                })
                .catch(error => console.error('Error loading CSV:', error));
        </script>
    </body>
</html>