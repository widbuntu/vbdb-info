<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>VBDB</title>
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
            crossorigin="anonymous">
        <link rel="stylesheet" href="styles/styles.css">
    </head>
    <body>
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            crossorigin="anonymous"></script>
        <div class="container mt-5">
            <ul class="nav nav-tabs" id="myTab" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="vbdb-tab"
                        data-bs-toggle="tab" data-bs-target="#vbdb"
                        type="button" role="tab" aria-controls="vbdb"
                        aria-selected="true">VBDB</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="live-tab" data-bs-toggle="tab"
                        data-bs-target="#live" type="button" role="tab"
                        aria-controls="live" aria-selected="false">Live</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="schedule-tab"
                        data-bs-toggle="tab"
                        data-bs-target="#schedule" type="button" role="tab"
                        aria-controls="schedule"
                        aria-selected="false">Schedule</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="teams-tab" data-bs-toggle="tab"
                        data-bs-target="#teams" type="button" role="tab"
                        aria-controls="teams"
                        aria-selected="false">Teams</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="rankings-tab"
                        data-bs-toggle="tab" data-bs-target="#rankings"
                        type="button" role="tab" aria-controls="rankings"
                        aria-selected="false">Rankings</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="histories-tab"
                        data-bs-toggle="tab" data-bs-target="#histories"
                        type="button" role="tab" aria-controls="histories"
                        aria-selected="false">Histories</button>
                </li>
            </ul>
            <div class="tab-content" id="myTabContent">
                <!-- Home tab -->
                <div class="tab-pane fade show active" id="vbdb" role="tabpanel"
                    aria-labelledby="vbdb-tab">
                    <h2 class="text-center">VBDB Content</h2>
                    <p class="text-center">Welcome to VBDB! This is a project to
                        host NCAA volleyball data openly for anyone. Enjoy!</p>
                    <p class="text-center">Work in progress</p>
                </div>
                <!-- Live tab -->
                <div class="tab-pane fade" id="live" role="tabpanel"
                    aria-labelledby="live-tab">
                    <h2 class="text-center">Live Content</h2>
                    <div class="table-responsive">
                    </div>
                </div>
                <!-- Schedule tab -->
                <div class="tab-pane fade" id="schedule" role="tabpanel"
                    aria-labelledby="schedule-tab">
                    <h2 class="text-center">Schedule Content</h2>
                    <div class="table-responsive">
                        <!-- <table id="scheduleTable" class="table table-dark table-hover" >
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Home Team</th>
                                    <th>Away Team</th>
                                    <th>Venue</th>
                                </tr>
                            </thead>
                            <tbody>
                                We'll fill this with rows of data from the CSV
                            </tbody>
                        </table> -->
                    </div>
                </div>
                <!-- Teams tab -->
                <div class="tab-pane fade" id="teams" role="tabpanel" aria-labelledby="teams-tab">
                    <h2 class="text-center">NCAA D1-D3 Schools</h2>
                    <!-- Dropdown for Searchs -->
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-md-6 col-12 mb-3">
                                <select class="form-select form-select" name="teams-division-dropdown" id="teams-division-dropdown">
                                    <option selected>Division</option>
                                    <option value="">D-I</option>
                                    <option value="">D-II</option>
                                    <option value="">D-III</option>
                                </select>
                            </div>
                            <div class="col-md-6 col-12 mb-3">
                                <select class="form-select form-select" name="teams-conference-dropdown" id="teams-conference-dropdown">
                                    <option selected>Conference</option>
                                    <option value="Atlantic Sun Conference">Atlantic Sun Conference</option>
                                    <option value="Northeast Conference">Northeast Conference</option>
                                    <option value="Western Athletic Conference">Western Athletic Conference</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="table-responsive">
                        <table id="teamsTable"
                            class="table table-dark table-hover table-striped">
                            <thead>
                                <tr>
                                    <th>Team</th>
                                    <th>Conference</th>
                                    <th>School URL</th>
                                    <th>Athletics URL</th>
                                    <th>State</th>
                                    <th>Year</th>
                                    <th>Division</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- We'll fill this with rows of data from the CSV -->
                            </tbody>
                        </table>
                    </div>
                </div>
                <!-- Rankings tab -->
                <div class="tab-pane fade" id="rankings" role="tabpanel"
                    aria-labelledby="rankings-tab">
                    <h2>Rankings Content</h2>
                    <p>This is the content for the Rankings tab.</p>
                </div>
                <!-- Histories tab -->
                <div class="tab-pane fade" id="histories" role="tabpanel"
                    aria-labelledby="histories-tab">
                    <h2>Histories Content</h2>
                    <p>This is the content for the Histories tab.</p>
                </div>
                <!-- End of content -->
            </div>
        </div>

        <!-- <script>
            // Fetch the CSV file from the GitHub raw URL
            fetch('https://raw.githubusercontent.com/widbuntu/vbdb-info/main/data/season_schedule.csv')
                .then(response => response.text()) // Read it as plain text
                .then(csvData => {
                    const rows = csvData.split('\n'); // Split CSV into rows
                    
                    const table = document.getElementById('scheduleTable');
                    const tbody = table.querySelector('tbody');
                    
                    // Process the rest of the rows as data
                    rows.slice(1).forEach(row => {
                        const rowData = row.match(/(".*?"|[^",\s]+)(?=\s*,|\s*$)/g); // Split each row by comma
                        const tr = document.createElement('tr');
        
                        rowData.forEach(data => {
                            const td = document.createElement('td');
                            td.textContent = data.trim(); // Create table data
                            tr.appendChild(td);
                        });
        
                        tbody.appendChild(tr); // Add row to tbody
                    });
                })
                .catch(error => console.error('Error loading CSV:', error));
        </script> -->
        <script>
            // Function to add http to urls
            function ensureProtocol(url) {
                if (!/^https?:\/\//i.test(url)) {
                    return 'http://' + url;
                }
                return url;
            }

            // Fetch the CSV file from the GitHub raw URL
            fetch('https://raw.githubusercontent.com/widbuntu/vbdb-info/main/data/teams.csv')
                .then(response => response.text()) // Read it as plain text
                .then(csvData => {
                    const rows = csvData.split('\n'); // Split CSV into rows
                    
                    const table = document.getElementById('teamsTable');
                    const tbody = table.querySelector('tbody');
                    
                    // Process the rest of the rows as data
                    rows.slice(1).forEach(row => {
                        const rowData = row.split(','); // Split each row by comma
                        const tr = document.createElement('tr');

                        rowData.forEach((cell, index) => {
                            const cellElement = document.createElement('td');
                            // Remove surrounding quotes from the cell data
                            cell = cell.trim().replace(/^"|"$/g, '');

                            // Check if the column is School URL (index 2) or Athletics URL (index 3)
                            if (index === 2 || index === 3) {
                                const link = document.createElement('a');
                                link.href = ensureProtocol(cell); // Ensure the URL has a protocol
                                link.textContent = cell; // Set the link text
                                link.target = '_blank'; // Open the link in a new tab
                                link.rel = 'noopener noreferrer'; // Security best practice
                                cellElement.appendChild(link); // Add the link to the cell
                            } else {
                                cellElement.textContent = cell; // Otherwise, just set the text content
                            }

                            tr.appendChild(cellElement); // Append cell to the row
                        });

                        tbody.appendChild(tr); // Add row to tbody
                    });
                })
                .catch(error => console.error('Error loading CSV:', error))
        </script>
    </body>
</html>